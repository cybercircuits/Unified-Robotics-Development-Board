/**
 *	@file ENC28J60.h
 *
 *	@date 3/28/2012
 *	@author jbaker
 */

#ifndef ENC28J60_H_
#define ENC28J60_H_

/** Control registers - datasheet Table 3-1: */
// These are the same for all banks:
#define ENC28J60_CR_EIE			0x1B
#define ENC28J60_CR_EIR			0x1C
#define ENC28J60_CR_ESTAT		0x1D
#define ENC28J60_CR_ECON2		0x1E
#define ENC28J60_CR_ECON1		0x1F

// CR Bank 0:
#define ENC28J60_CR_ERDPTL		0x00
#define ENC28J60_CR_ERDPTH		0x01
#define ENC28J60_CR_EWRPTL		0x02
#define ENC28J60_CR_EWRPTH		0x03
#define ENC28J60_CR_ETXSTL		0x04
#define ENC28J60_CR_ETXSTH		0x05
#define ENC28J60_CR_ETXNDL		0x06
#define ENC28J60_CR_ETXNDH		0x07
#define ENC28J60_CR_ERXSTL		0x08
#define ENC28J60_CR_ERXSTH		0x09
#define ENC28J60_CR_ERXNDL		0x0A
#define ENC28J60_CR_ERXNDH		0x0B
#define ENC28J60_CR_ERXRDPTL	0x0C
#define ENC28J60_CR_ERXRDPTH	0x0D
#define ENC28J60_CR_ERXWRPTL	0x0E
#define ENC28J60_CR_ERXWRPTH	0x0F
#define ENC28J60_CR_EDMASTL		0x10
#define ENC28J60_CR_EDMASTH		0x11
#define ENC28J60_CR_EDMANDL		0x12
#define ENC28J60_CR_EDMANDH		0x13
#define ENC28J60_CR_EDMADSTL	0x14
#define ENC28J60_CR_EDMADSTH	0x15
#define ENC28J60_CR_EDMACSL		0x16
#define ENC28J60_CR_EDMACSH		0x17


// CR Bank 1:
#define ENC28J60_CR_EHT0		0x00
#define ENC28J60_CR_EHT1		0x01
#define ENC28J60_CR_EHT2		0x02
#define ENC28J60_CR_EHT3		0x03
#define ENC28J60_CR_EHT4		0x04
#define ENC28J60_CR_EHT5		0x05
#define ENC28J60_CR_EHT6		0x06
#define ENC28J60_CR_EHT7		0x07
#define ENC28J60_CR_EPMM0		0x08
#define ENC28J60_CR_EPMM1		0x09
#define ENC28J60_CR_EPMM2		0x0A
#define ENC28J60_CR_EPMM3		0x0B
#define ENC28J60_CR_EPMM4		0x0C
#define ENC28J60_CR_EPMM5		0x0D
#define ENC28J60_CR_EPMM6		0x0E
#define ENC28J60_CR_EPMM7		0x0F
#define ENC28J60_CR_EPMCSL		0x10
#define ENC28J60_CR_EPMCSH		0x11
#define ENC28J60_CR_EPMOL		0x14
#define ENC28J60_CR_EPMOH		0x15
#define ENC28J60_CR_ERXFCON		0x18
#define ENC28J60_CR_EPKTCNT		0x19

// CR Bank 2:
#define ENC28J60_CR_MACON1		0x00
#define ENC28J60_CR_MACON3		0x02
#define ENC28J60_CR_MACON4		0x03
#define ENC28J60_CR_MABBIPG		0x04
#define ENC28J60_CR_MAIPGL		0x06
#define ENC28J60_CR_MAIPGH		0x07
#define ENC28J60_CR_MACLCON1	0x08
#define ENC28J60_CR_MACLCON2	0x09
#define ENC28J60_CR_MAMXFLL		0x0A
#define ENC28J60_CR_MAMXFLH		0x0B
#define ENC28J60_CR_MICMD		0x12
#define ENC28J60_CR_MIREGADR	0x14
#define ENC28J60_CR_MIWRL		0x16
#define ENC28J60_CR_MIWRH		0x17
#define ENC28J60_CR_MIRDL		0x18
#define ENC28J60_CR_MIRDH		0x19

// CR Bank 3:
#define ENC28J60_CR_MAADR5		0x00
#define ENC28J60_CR_MAADR6		0x01
#define ENC28J60_CR_MAADR3		0x02
#define ENC28J60_CR_MAADR4		0x03
#define ENC28J60_CR_MAADR1		0x04
#define ENC28J60_CR_MAADR2		0x05
#define ENC28J60_CR_EBSTSD		0x06
#define ENC28J60_CR_EBSTCON		0x07
#define ENC28J60_CR_EBSTCSL		0x08
#define ENC28J60_CR_EBSTCSH		0x09
#define ENC28J60_CR_MISTAT		0x0A
#define ENC28J60_CR_EREVID		0x12
#define ENC28J60_CR_ECOCON		0x15
#define ENC28J60_CR_EFLOCON		0x17
#define ENC28J60_CR_EPAUSL		0x18
#define ENC28J60_CR_EPAUSH		0x19

/** Control register bits - datasheet Table 3-2: */
#define ENC28J60_CR_EIE_INTIE	1 << 7
#define ENC28J60_CR_EIE_PKTIE	1 << 6
#define ENC28J60_CR_EIE_DMAIE	1 << 5
#define ENC28J60_CR_EIE_LINKIE	1 << 4
#define ENC28J60_CR_EIE_TXIE	1 << 3
#define ENC28J60_CR_EIE_TXERIE	1 << 1
#define ENC28J60_CR_EIE_RXERIE	1

#define ENC28J60_CR_EIR_PKTIF	1 << 6
#define ENC28J60_CR_EIR_DMAIF	1 << 5
#define ENC28J60_CR_EIR_LINKIF	1 << 4
#define ENC28J60_CR_EIR_TXIF	1 << 3
#define ENC28J60_CR_EIR_TXERIF	1 << 1
#define ENC28J60_CR_EIR_RXERIF	1

#define ENC28J60_CR_ESTAT_INT		1 << 7
#define ENC28J60_CR_ESTAT_BUFER		1 << 6
#define ENC28J60_CR_ESTAT_LATECOL	1 << 4
#define ENC28J60_CR_ESTAT_RXBUSY	1 << 2
#define ENC28J60_CR_ESTAT_TXABRT	1 << 1
#define ENC28J60_CR_ESTAT_CLKRDY	1

#define ENC28J60_CR_ECON2_AUTOINC	1 << 7
#define ENC28J60_CR_ECON2_PKTDEC	1 << 6
#define ENC28J60_CR_ECON2_PWRSV		1 << 5
#define ENC28J60_CR_ECON2_VRPS		1 << 3

#define ENC28J60_CR_ECON1_TXRST		1 << 7
#define ENC28J60_CR_ECON1_RXRST		1 << 6
#define ENC28J60_CR_ECON1_DMAST		1 << 5
#define ENC28J60_CR_ECON1_CSUMEN	1 << 4
#define ENC28J60_CR_ECON1_TXRTS		1 << 3
#define ENC28J60_CR_ECON1_RXEN		1 << 2
#define ENC28J60_CR_ECON1_BSEL1		1 << 1
#define ENC28J60_CR_ECON1_BSEL0		1

#define ENC28J60_CR_ERXFCON_UCEN	1 << 7
#define ENC28J60_CR_ERXFCON_ANDOR	1 << 6
#define ENC28J60_CR_ERXFCON_CRCEN	1 << 5
#define ENC28J60_CR_ERXFCON_PMEN	1 << 4
#define ENC28J60_CR_ERXFCON_MPEN	1 << 3
#define ENC28J60_CR_ERXFCON_HTEN	1 << 2
#define ENC28J60_CR_ERXFCON_MCEN	1 << 1
#define ENC28J60_CR_ERXFCON_BCEN	1

#define ENC28J60_CR_MACON1_TXPAUS	1 << 3
#define ENC28J60_CR_MACON1_RXPAUS	1 << 2
#define ENC28J60_CR_MACON1_PASSALL	1 << 1
#define ENC28J60_CR_MACON1_MARXEN	1

#define ENC28J60_CR_MACON3_PADCFG2	1 << 7
#define ENC28J60_CR_MACON3_PADCFG1	1 << 6
#define ENC28J60_CR_MACON3_PADCFG0	1 << 5
#define ENC28J60_CR_MACON3_TXCRCEN	1 << 4
#define ENC28J60_CR_MACON3_PHDREN	1 << 3
#define ENC28J60_CR_MACON3_HFRMEN	1 << 2
#define ENC28J60_CR_MACON3_FRMLNEN	1 << 1
#define ENC28J60_CR_MACON3_FULDPX	1

#define ENC28J60_CR_MACON4_DEFER	1 << 6
#define ENC28J60_CR_MACON4_BPEN		1 << 5
#define ENC28J60_CR_MACON4_NOBKOFF	1 << 4

#define ENC28J60_CR_MICMD_MIISCAN	1 << 1
#define ENC28J60_CR_MICMD_MIIRD		1

#define ENC28J60_CR_EBSTCON_PSV2	1 << 7
#define ENC28J60_CR_EBSTCON_PSV1	1 << 6
#define ENC28J60_CR_EBSTCON_PSV0	1 << 5
#define ENC28J60_CR_EBSTCON_PSEL	1 << 4
#define ENC28J60_CR_EBSTCON_TMSEL1	1 << 3
#define ENC28J60_CR_EBSTCON_TMSEL0	1 << 2
#define ENC28J60_CR_EBSTCON_TME		1 << 1
#define ENC28J60_CR_EBSTCON_BISTST	1

#define ENC28J60_CR_MISTAT_NVALID	1 << 2
#define ENC28J60_CR_MISTAT_SCAN		1 << 1
#define ENC28J60_CR_MISTAT_BUSY		1

#define ENC28J60_CR_ECOCON_COCON2	1 << 2
#define ENC28J60_CR_ECOCON_COCON1	1 << 1
#define ENC28J60_CR_ECOCON_COCON0	1

#define ENC28J60_CR_EFLOCON_FULDPXS	1 << 2
#define ENC28J60_CR_EFLOCON_FCEN1	1 << 1
#define ENC28J60_CR_EFLOCON_FCEN0	1

/** PHY registers - datasheet Table 3-3: */
#define ENC28J60_PR_PHCON1		0x00
#define ENC28J60_PR_PHSTAT1		0x01
#define ENC28J60_PR_PHID1		0x02
#define ENC28J60_PR_PHID2		0x03
#define ENC28J60_PR_PHCON2		0x10
#define ENC28J60_PR_PHSTAT2		0x11
#define ENC28J60_PR_PHIE		0x12
#define ENC28J60_PR_PHIR		0x13
#define ENC28J60_PR_PHLCON		0x14

#define ENC28J60_PR_PHCON1_PRST		1 << 15
#define ENC28J60_PR_PHCON1_PLOOPBK	1 << 14
#define ENC28J60_PR_PHCON1_PPWRSV	1 << 11
#define ENC28J60_PR_PHCON1_PDPXMD	1 << 8

#define ENC28J60_PR_PHSTAT1_PFDPX	1 << 12
#define ENC28J60_PR_PHSTAT1_PHDPX	1 << 11
#define ENC28J60_PR_PHSTAT1_LLSTAT	1 << 2
#define ENC28J60_PR_PHSTAT1_JBSTAT	1 << 1

#define ENC28J60_PR_PHCON2_FRCLNK	1 << 14
#define ENC28J60_PR_PHCON2_TXDIS	1 << 13
#define ENC28J60_PR_PHCON2_JABBER	1 << 10
#define ENC28J60_PR_PHCON2_HDLDIS	1 << 8

#define ENC28J60_PR_PHSTAT2_TXSTAT	1 << 13
#define ENC28J60_PR_PHSTAT2_RXSTAT	1 << 12
#define ENC28J60_PR_PHSTAT2_COLSTAT	1 << 11
#define ENC28J60_PR_PHSTAT2_LSTAT	1 << 10
#define ENC28J60_PR_PHSTAT2_DPXSTAT	1 << 9
#define ENC28J60_PR_PHSTAT2_PLRITY	1 << 5

#define ENC28J60_PR_PHIE_PLNKIE		1 << 4
#define ENC28J60_PR_PHIE_PGEIE		1 << 1

#define ENC28J60_PR_PHIR_PLNKIF		1 << 4
#define ENC28J60_PR_PHIR_PGIF		1 << 2

#define ENC28J60_PR_PHLCON_LACFG3	1 << 11
#define ENC28J60_PR_PHLCON_LACFG2	1 << 10
#define ENC28J60_PR_PHLCON_LACFG1	1 << 9
#define ENC28J60_PR_PHLCON_LACFG0	1 << 8
#define ENC28J60_PR_PHLCON_LBCFG3	1 << 7
#define ENC28J60_PR_PHLCON_LBCFG2	1 << 6
#define ENC28J60_PR_PHLCON_LBCFG1	1 << 5
#define ENC28J60_PR_PHLCON_LBCFG0	1 << 4
#define ENC28J60_PR_PHLCON_LFRQ1	1 << 3
#define ENC28J60_PR_PHLCON_LFRQ0	1 << 2
#define ENC28J60_PR_PHLCON_STRCH	1 << 1

/**	SPI Instruction Set - datasheet Table 4-1: */
#define ENC28J60_OP_RCR(A)		((0b000 << 5) & (A))
#define ENC28J60_OP_RBM			0b00111010
#define ENC28J60_OP_WCR(A)		((0b010 << 5) & (A))
#define ENC28J60_OP_WBM			0b01111010
#define ENC28J60_OP_BFS(A)		((0b100 << 5) & (A))
#define ENC28J60_OP_BFC(A)		((0b101 << 5) & (A))
#define ENC28J60_OP_SRC			0b11111111


#endif /* ENC28J60_H_ */
